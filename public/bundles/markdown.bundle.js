(r=>{var c=r.Markdown=function(e){switch(typeof e){case"undefined":this.dialect=c.dialects.Gruber;break;case"object":this.dialect=e;break;default:if(!(e in c.dialects))throw new Error("Unknown Markdown dialect '"+String(e)+"'");this.dialect=c.dialects[e]}this.em_state=[],this.strong_state=[],this.debug_indent=""};function i(){return"Markdown.mk_block( "+uneval(this.toString())+", "+uneval(this.trailing)+", "+uneval(this.lineNumber)+" )"}function o(){var e=require("util");return"Markdown.mk_block( "+e.inspect(this.toString())+", "+e.inspect(this.trailing)+", "+e.inspect(this.lineNumber)+" )"}r.parse=function(e,t){return new c(t).toTree(e)},r.toHTML=function(e,t,n){e=r.toHTMLTree(e,t,n);return r.renderJsonML(e)},r.toHTMLTree=function(e,t,n){var t=u(e="string"==typeof e?this.parse(e,t):e),r={},e=function e(t,n,r){r=r||{};var i=t.slice(0);"function"==typeof r.preprocessTreeNode&&(i=r.preprocessTreeNode(i,n));var a=u(i);if(a){for(var o in i[1]={},a)i[1][o]=a[o];a=i[1]}if("string"==typeof i)return i;switch(i[0]){case"header":i[0]="h"+i[1].level,delete i[1].level;break;case"bulletlist":i[0]="ul";break;case"numberlist":i[0]="ol";break;case"listitem":i[0]="li";break;case"para":i[0]="p";break;case"markdown":i[0]="html",a&&delete a.references;break;case"code_block":i[0]="pre",o=a?2:1;var s=["code"];s.push.apply(s,i.splice(o,i.length-o)),i[o]=s;break;case"inlinecode":i[0]="code";break;case"img":i[1].src=i[1].href,delete i[1].href;break;case"linebreak":i[0]="br";break;case"link":i[0]="a";break;case"link_ref":if(i[0]="a",!(l=n[a.ref]))return a.original;delete a.ref,a.href=l.href,l.title&&(a.title=l.title),delete a.original;break;case"img_ref":var l;if(i[0]="img",!(l=n[a.ref]))return a.original;delete a.ref,a.src=l.href,l.title&&(a.title=l.title),delete a.original}o=1;if(a){for(var c in i[1]){o=2;break}1===o&&i.splice(o,1)}for(;o<i.length;++o)i[o]=e(i[o],n,r);return i}(e,r=t&&t.references?t.references:r,n);return function e(t){var n=u(t)?2:1;for(;n<t.length;)"string"==typeof t[n]?n+1<t.length&&"string"==typeof t[n+1]?t[n]+=t.splice(n+1,1)[0]:++n:(e(t[n]),++n)}(e),e};var b,y,_,k,w=c.mk_block=function(e,t,n){1==arguments.length&&(t="\n\n");e=new String(e);return e.trailing=t,e.inspect=o,e.toSource=i,null!=n&&(e.lineNumber=n),e};function s(e){for(var t=0,n=-1;-1!==(n=e.indexOf("\n",n+1));)t++;return t}function x(e,t,n,r){if(t)e.push(["para"].concat(n));else{var i=e[e.length-1]instanceof Array&&"para"==e[e.length-1][0]?e[e.length-1]:e;r&&1<e.length&&n.unshift(r);for(var a=0;a<n.length;a++){var o=n[a];"string"==typeof o&&1<i.length&&"string"==typeof i[i.length-1]?i[i.length-1]+=o:i.push(o)}}}function $(e,t,n){e=e.list,e=e[e.length-1];e[1]instanceof Array&&"para"==e[1][0]||(t+1==n.length?e.push(["para"].concat(e.splice(1,e.length-1))):(t=e.pop(),e.push(["para"].concat(e.splice(1,e.length-1)),t)))}function e(o,s){var l=o+"_state",c="strong"==o?"em_state":"strong_state";function h(e){this.len_after=e,this.name="close_"+s}return function(e,t){var n,r,i,a;return this[l][0]==s?(this[l].shift(),[e.length,new h(e.length-s.length)]):(n=this[c].slice(),r=this[l].slice(),this[l].unshift(s),a=(i=this.processInline(e.substr(s.length)))[i.length-1],this[l].shift(),a instanceof h?(i.pop(),[e.length-a.len_after,[o].concat(i)]):(this[c]=n,this[l]=r,[s.length,s]))}}c.prototype.split_blocks=function(e,t){e=e.replace(/(\r\n|\n|\r)/g,"\n");var n,r=/([\s\S]+?)($|\n#|\n(?:\s*\n|$)+)/g,i=[],a=1;for(null!=(n=/^(\s*\n)/.exec(e))&&(a+=s(n[0]),r.lastIndex=n[0].length);null!==(n=r.exec(e));)"\n#"==n[2]&&(n[2]="\n",r.lastIndex--),i.push(w(n[1],n[2],a)),a+=s(n[0]);return i},c.prototype.processBlock=function(e,t){var n=this.dialect.block,r=n.__order__;if("__call__"in n)return n.__call__.call(this,e,t);for(var i=0;i<r.length;i++){var a=n[r[i]].call(this,e,t);if(a)return(!l(a)||0<a.length&&!l(a[0]))&&this.debug(r[i],"didn't return a proper array"),a}return[]},c.prototype.processInline=function(e){return this.dialect.inline.__call__.call(this,String(e))},c.prototype.toTree=function(e,t){var n=e instanceof Array?e:this.split_blocks(e),e=this.tree;try{for(this.tree=t||this.tree||["markdown"];n.length;){var r=this.processBlock(n.shift(),n);r.length&&this.tree.push.apply(this.tree,r)}return this.tree}finally{t&&(this.tree=e)}},c.prototype.debug=function(){var e=Array.prototype.slice.call(arguments);e.unshift(this.debug_indent),"undefined"!=typeof print&&print.apply(print,e),"undefined"!=typeof console&&void 0!==console.log&&console.log.apply(null,e)},c.prototype.loop_re_over_block=function(e,t,n){for(var r,i=t.valueOf();i.length&&null!=(r=e.exec(i));)i=i.substr(r[0].length),n.call(this,r);return i},c.dialects={},c.dialects.Gruber={block:{atxHeader:function(e,t){var n,r=e.match(/^(#{1,6})\s*(.*?)\s*#*\s*(?:\n|$)/);if(r)return n=["header",{level:r[1].length}],Array.prototype.push.apply(n,this.processInline(r[2])),r[0].length<e.length&&t.unshift(w(e.substr(r[0].length),e.trailing,e.lineNumber+2)),[n]},setextHeader:function(e,t){var n,r=e.match(/^(.*)\n([-=])\2\2+(?:\n|$)/);if(r)return n=["header",{level:"="===r[2]?1:2},r[1]],r[0].length<e.length&&t.unshift(w(e.substr(r[0].length),e.trailing,e.lineNumber+2)),[n]},code:function(e,t){var n=[],r=/^(?: {0,3}\t| {4})(.*)\n?/;if(e.match(r)){for(;;){var i=this.loop_re_over_block(r,e.valueOf(),function(e){n.push(e[1])});if(i.length){t.unshift(w(i,e.trailing));break}if(!t.length)break;if(!t[0].match(r))break;n.push(e.trailing.replace(/[^\n]/g,"").substring(2)),e=t.shift()}return[["code_block",n.join("\n")]]}},horizRule:function(e,t){var n,e=e.match(/^(?:([\s\S]*?)\n)?[ \t]*([-_*])(?:[ \t]*\2){2,}[ \t]*(?:\n([\s\S]*))?$/);if(e)return n=[["hr"]],e[1]&&n.unshift.apply(n,this.processBlock(e[1],[])),e[3]&&t.unshift(w(e[3])),n},lists:(b="[*+-]|\\d+\\.",y=/[*+-]/,_=new RegExp("^( {0,3})("+b+")[ \t]+"),k="(?: {0,3}\\t| {4})",function(e,t){if(h=e.match(_)){for(var n,r=[],i=v(h),a=!1,o=[r[0].list];;){for(var s=e.split(/(?=\n)/),l="",c=0;c<s.length;c++){var h,u="",f=s[c].replace(/^\n/,function(e){return u=e,""}),d=(d=r.length,new RegExp("(?:^("+k+"{0,"+d+"} {0,3})("+b+")\\s+)|(^"+k+"{0,"+(d-1)+"}[ ]{0,4})"));if(void 0!==(h=f.match(d))[1]){l.length&&(x(n,a,this.processInline(l),u),a=!1,l=""),h[1]=h[1].replace(/ {0,3}\t/g,"    ");d=Math.floor(h[1].length/4)+1;if(d>r.length)i=v(h),n.push(i),n=i[1]=["listitem"];else{for(var p=!1,g=0;g<r.length;g++)if(r[g].indent==h[1]){i=r[g].list,r.splice(g+1,r.length-(g+1)),p=!0;break}p||(++d<=r.length?(r.splice(d,r.length-d),i=r[d-1].list):(i=v(h),n.push(i))),i.push(n=["listitem"])}u=""}f.length>h[0].length&&(l+=u+f.substr(h[0].length))}l.length&&(x(n,a,this.processInline(l),u),a=!1,l="");var m=((e,t)=>{for(var n=new RegExp("^("+k+"{"+e+"}.*?\\n?)*$"),r=new RegExp("^"+k+"{"+e+"}","gm"),i=[];0<t.length&&n.exec(t[0]);){var a=t.shift(),o=a.replace(r,"");i.push(w(o,a.trailing,a.lineNumber))}return i})(r.length,t),m=(0<m.length&&(S(r,$,this),n.push.apply(n,this.toTree(m,[]))),t[0]&&t[0].valueOf()||"");if(!m.match(_)&&!m.match(/^ /))break;e=t.shift();m=this.dialect.block.horizRule(e,t);if(m){o.push.apply(o,m);break}S(r,$,this),a=!0}return o}function v(e){var t=y.exec(e[2])?["bulletlist"]:["numberlist"];return r.push({list:t,indent:e[1]}),t}}),blockquote:function(e,t){if(e.match(/^>/m)){var n=[];if(">"!=e[0]){for(var r=e.split(/\n/),i=[],a=e.lineNumber;r.length&&">"!=r[0][0];)i.push(r.shift()),a++;var o=w(i.join("\n"),"\n",e.lineNumber);n.push.apply(n,this.processBlock(o,[])),e=w(r.join("\n"),e.trailing,a)}for(;t.length&&">"==t[0][0];){var s=t.shift();e=w(e+e.trailing+s,s.trailing,e.lineNumber)}var o=e.replace(/^> ?/gm,""),o=(this.tree,this.toTree(o,["blockquote"])),l=u(o);return l&&l.references&&(delete l.references,h(l))&&o.splice(1,1),n.push(o),n}},referenceDefn:function(e,t){var n,r=/^\s*\[(.*?)\]:\s*(\S+)(?:\s+(?:(['"])(.*?)\3|\((.*?)\)))?\n?/;if(e.match(r))return u(this.tree)||this.tree.splice(1,0,{}),void 0===(n=u(this.tree)).references&&(n.references={}),(r=this.loop_re_over_block(r,e,function(e){e[2]&&"<"==e[2][0]&&">"==e[2][e[2].length-1]&&(e[2]=e[2].substring(1,e[2].length-1));var t=n.references[e[1].toLowerCase()]={href:e[2]};void 0!==e[4]?t.title=e[4]:void 0!==e[5]&&(t.title=e[5])})).length&&t.unshift(w(r,e.trailing)),[]},para:function(e,t){return[["para"].concat(this.processInline(e))]}}},c.dialects.Gruber.inline={__oneElement__:function(e,t,n){var r;return t=t||this.dialect.inline.__patterns__,(t=new RegExp("([\\s\\S]*?)("+(t.source||t)+")").exec(e))?t[1]?[t[1].length,t[1]]:(r=t[2]in this.dialect.inline?this.dialect.inline[t[2]].call(this,e.substr(t.index),t,n||[]):r)||[t[2].length,t[2]]:[e.length,e]},__call__:function(e,t){var n,r=[];function i(e){"string"==typeof e&&"string"==typeof r[r.length-1]?r[r.length-1]+=e:r.push(e)}for(;0<e.length;)n=this.dialect.inline.__oneElement__.call(this,e,t,r),e=e.substr(n.shift()),S(n,i);return r},"]":function(){},"}":function(){},__escape__:/^\\[\\`\*_{}\[\]()#\+.!\-]/,"\\":function(e){return this.dialect.inline.__escape__.exec(e)?[2,e.charAt(1)]:[1,"\\"]},"![":function(e){var t,n=e.match(/^!\[(.*?)\][ \t]*\([ \t]*([^")]*?)(?:[ \t]+(["'])(.*?)\3)?[ \t]*\)/);return n?(n[2]&&"<"==n[2][0]&&">"==n[2][n[2].length-1]&&(n[2]=n[2].substring(1,n[2].length-1)),n[2]=this.dialect.inline.__call__.call(this,n[2],/\\/)[0],t={alt:n[1],href:n[2]||""},void 0!==n[4]&&(t.title=n[4]),[n[0].length,["img",t]]):(n=e.match(/^!\[(.*?)\][ \t]*\[(.*?)\]/))?[n[0].length,["img_ref",{alt:n[1],ref:n[2].toLowerCase(),original:n[0]}]]:[2,"!["]},"[":function(e){var t=String(e),n=c.DialectHelpers.inline_until_char.call(this,e.substr(1),"]");if(!n)return[1,"["];var r,i=1+n[0],n=n[1],a=(e=e.substr(i)).match(/^\s*\([ \t]*([^"']*)(?:[ \t]+(["'])(.*?)\2)?[ \t]*\)/);if(a){var o=a[1];if(i+=a[0].length,o&&"<"==o[0]&&">"==o[o.length-1]&&(o=o.substring(1,o.length-1)),!a[3])for(var s=1,l=0;l<o.length;l++)switch(o[l]){case"(":s++;break;case")":0==--s&&(i-=o.length-l,o=o.substring(0,l))}return r={href:(o=this.dialect.inline.__call__.call(this,o,/\\/)[0])||""},void 0!==a[3]&&(r.title=a[3]),[i,["link",r].concat(n)]}return(a=e.match(/^\s*\[(.*?)\]/))?[i+=a[0].length,["link_ref",r={ref:(a[1]||String(n)).toLowerCase(),original:t.substr(0,i)}].concat(n)]:1==n.length&&"string"==typeof n[0]?[i,["link_ref",r={ref:n[0].toLowerCase(),original:t.substr(0,i)},n[0]]]:[1,"["]},"<":function(e){return null!=(e=e.match(/^<(?:((https?|ftp|mailto):[^>]+)|(.*?@.*?\.[a-zA-Z]+))>/))?e[3]?[e[0].length,["link",{href:"mailto:"+e[3]},e[3]]]:"mailto"==e[2]?[e[0].length,["link",{href:e[1]},e[1].substr("mailto:".length)]]:[e[0].length,["link",{href:e[1]},e[1]]]:[1,"<"]},"`":function(e){e=e.match(/(`+)(([\s\S]*?)\1)/);return e&&e[2]?[e[1].length+e[2].length,["inlinecode",e[3]]]:[1,"`"]},"  \n":function(e){return[3,["linebreak"]]}},c.dialects.Gruber.inline["**"]=e("strong","**"),c.dialects.Gruber.inline.__=e("strong","__"),c.dialects.Gruber.inline["*"]=e("em","*"),c.dialects.Gruber.inline._=e("em","_"),c.buildBlockOrder=function(e){var t,n=[];for(t in e)"__order__"!=t&&"__call__"!=t&&n.push(t);e.__order__=n},c.buildInlinePatterns=function(e){var t,n,r=[];for(t in e)t.match(/^__.*__$/)||(n=t.replace(/([\\.*+?|()\[\]{}])/g,"\\$1").replace(/\n/,"\\n"),r.push(1==t.length?n:"(?:"+n+")"));r=r.join("|"),e.__patterns__=r;var i=e.__call__;e.__call__=function(e,t){return null!=t?i.call(this,e,t):i.call(this,e,r)}},c.DialectHelpers={},c.DialectHelpers.inline_until_char=function(e,t){for(var n=0,r=[];;){if(e.charAt(n)==t)return[++n,r];if(n>=e.length)return null;var i=this.dialect.inline.__oneElement__.call(this,e.substr(n));n+=i[0],r.push.apply(r,i.slice(1))}},c.subclassDialect=function(e){function t(){}function n(){}return t.prototype=e.block,n.prototype=e.inline,{block:new t,inline:new n}},c.buildBlockOrder(c.dialects.Gruber.block),c.buildInlinePatterns(c.dialects.Gruber.inline),c.dialects.Maruku=c.subclassDialect(c.dialects.Gruber),c.dialects.Maruku.processMetaHash=function(e){for(var t,n=(e=>{for(var t=e.split(""),n=[""],r=!1;t.length;){var i=t.shift();switch(i){case" ":r?n[n.length-1]+=i:n.push("");break;case"'":case'"':r=!r;break;case"\\":i=t.shift();default:n[n.length-1]+=i}}return n})(e),r={},i=0;i<n.length;++i)/^#/.test(n[i])?r.id=n[i].substring(1):/^\./.test(n[i])?r.class=r.class?r.class+n[i].replace(/./," "):n[i].substring(1):/\=/.test(n[i])&&(r[(t=n[i].split(/\=/))[0]]=t[1]);return r},c.dialects.Maruku.block.document_meta=function(e,t){if(!(1<e.lineNumber)&&e.match(/^(?:\w+:.*\n)*\w+:.*$/)){u(this.tree)||this.tree.splice(1,0,{});var n=e.split(/\n/);for(p in n){var r=n[p].match(/(\w+):\s*(.*)$/),i=r[1].toLowerCase(),r=r[2];this.tree[1][i]=r}return[]}},c.dialects.Maruku.block.block_meta=function(e,t){var n=e.match(/(^|\n) {0,3}\{:\s*((?:\\\}|[^\}])*)\s*\}$/);if(n){var r=this.dialect.processMetaHash(n[2]);if(""===n[1]){var n=this.tree[this.tree.length-1],i=u(n);if("string"==typeof n)return;for(a in i||n.splice(1,0,i={}),r)i[a]=r[a];return[]}n=e.replace(/\n.*$/,""),e=this.processBlock(n,[]);for(a in(i=u(e[0]))||e[0].splice(1,0,i={}),r)i[a]=r[a];return e}},c.dialects.Maruku.block.definition_list=function(e,t){var n=/^((?:[^\s:].*\n)+):\s+([\s\S]+)$/,r=["dl"];if(o=e.match(n)){for(var i=[e];t.length&&n.exec(t[0]);)i.push(t.shift());for(var a=0;a<i.length;++a){for(var o,s=(o=i[a].match(n))[1].replace(/\n$/,"").split(/\n/),l=o[2].split(/\n:\s+/),c=0;c<s.length;++c)r.push(["dt",s[c]]);for(c=0;c<l.length;++c)r.push(["dd"].concat(this.processInline(l[c].replace(/(\n)\s+/,"$1"))))}return[r]}},c.dialects.Maruku.block.table=function(e,t){function n(e,t){(t=t||"\\s").match(/^[\\|\[\]{}?*.+^$]$/)&&(t="\\"+t);for(var n,r=[],i=new RegExp("^((?:\\\\.|[^\\\\"+t+"])*)"+t+"(.*)");n=e.match(i);)r.push(n[1]),e=n[2];return r.push(e),r}var r,i;if(i=e.match(/^ {0,3}\|(.+)\n {0,3}\|\s*([\-:]+[\-| :]*)\n((?:\s*\|.*(?:\n|$))*)(?=\n|$)/))i[3]=i[3].replace(/^\s*\|/gm,"");else if(!(i=e.match(/^ {0,3}(\S(?:\\.|[^\\|])*\|.*)\n {0,3}([\-:]+\s*\|[\-| :]*)\n((?:(?:\\.|[^\\|])*\|.*(?:\n|$))*)(?=\n|$)/)))return;var a=["table",["thead",["tr"]],["tbody"]],o=(i[2]=i[2].replace(/\|\s*$/,"").split("|"),[]);for(S(i[2],function(e){e.match(/^\s*-+:\s*$/)?o.push({align:"right"}):e.match(/^\s*:-+\s*$/)?o.push({align:"left"}):e.match(/^\s*:-+:\s*$/)?o.push({align:"center"}):o.push({})}),i[1]=n(i[1].replace(/\|\s*$/,""),"|"),r=0;r<i[1].length;r++)a[1][1].push(["th",o[r]||{}].concat(this.processInline(i[1][r].trim())));return S(i[3].replace(/\|\s*$/gm,"").split("\n"),function(e){var t=["tr"];for(e=n(e,"|"),r=0;r<e.length;r++)t.push(["td",o[r]||{}].concat(this.processInline(e[r].trim())));a[2].push(t)},this),[a]},c.dialects.Maruku.inline["{:"]=function(e,t,n){if(!n.length)return[2,"{:"];n=n[n.length-1];if("string"==typeof n)return[2,"{:"];e=e.match(/^\{:\s*((?:\\\}|[^\}])*)\s*\}/);if(!e)return[2,"{:"];var r,i=this.dialect.processMetaHash(e[1]),a=u(n);for(r in a||n.splice(1,0,a={}),i)a[r]=i[r];return[e[0].length,""]},c.dialects.Maruku.inline.__escape__=/^\\[\\`\*_{}\[\]()#\+.!\-|:]/,c.buildBlockOrder(c.dialects.Maruku.block),c.buildInlinePatterns(c.dialects.Maruku.inline);var l=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)},S=Array.prototype.forEach?function(e,t,n){return e.forEach(t,n)}:function(e,t,n){for(var r=0;r<e.length;r++)t.call(n||e,e[r],r,e)},h=function(e){for(var t in e)if(hasOwnProperty.call(e,t))return!1;return!0};function u(e){return l(e)&&1<e.length&&"object"==typeof e[1]&&!l(e[1])?e[1]:void 0}function f(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function d(e){if("string"==typeof e)return f(e);var t=e.shift(),n={},r=[];for(!e.length||"object"!=typeof e[0]||e[0]instanceof Array||(n=e.shift());e.length;)r.push(d(e.shift()));var i,a="";for(i in n)a+=" "+i+'="'+f(n[i])+'"';return"img"==t||"br"==t||"hr"==t?"<"+t+a+"/>":"<"+t+a+">"+r.join("")+"</"+t+">"}r.renderJsonML=function(e,t){(t=t||{}).root=t.root||!1;var n=[];if(t.root)n.push(d(e));else for(e.shift(),!e.length||"object"!=typeof e[0]||e[0]instanceof Array||e.shift();e.length;)n.push(d(e.shift()));return n.join("\n\n")}})("undefined"==typeof exports?(window.markdown={},window.markdown):exports),function(e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).toMarkdown=e()}(function(){return function r(i,a,o){function s(n,e){if(!a[n]){if(!i[n]){var t="function"==typeof require&&require;if(!e&&t)return t(n,!0);if(l)return l(n,!0);e=new Error("Cannot find module '"+n+"'");throw e.code="MODULE_NOT_FOUND",e}t=a[n]={exports:{}};i[n][0].call(t.exports,function(e){var t=i[n][1][e];return s(t||e)},t,t.exports,r,i,a,o)}return a[n].exports}for(var l="function"==typeof require&&require,e=0;e<o.length;e++)s(o[e]);return s}({1:[function(e,t,n){var h,u,i=e("./lib/md-converters"),a=e("./lib/gfm-converters"),o=e("./lib/html-parser"),s=e("collapse-whitespace"),r=["address","article","aside","audio","blockquote","body","canvas","center","dd","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frameset","h1","h2","h3","h4","h5","h6","header","hgroup","hr","html","isindex","li","main","menu","nav","noframes","noscript","ol","output","p","pre","section","table","tbody","td","tfoot","th","thead","tr","ul"];function f(e){return-1!==r.indexOf(e.nodeName.toLowerCase())}var l=["area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"];function d(e){return-1!==l.indexOf(e.nodeName.toLowerCase())}function p(e){for(var t="",n=0;n<e.childNodes.length;n++)1===e.childNodes[n].nodeType?t+=e.childNodes[n]._replacement:3===e.childNodes[n].nodeType&&(t+=e.childNodes[n].data);return t}function g(e,t){var n,r,e="left"===e?(n=t.previousSibling,/ $/):(n=t.nextSibling,/^ /);return n&&(3===n.nodeType?r=e.test(n.nodeValue):1!==n.nodeType||f(n)||(r=e.test(n.textContent))),r}function c(e){var t,n=p(e);if(d(e)||/A|TH|TD/.test(e.nodeName)||!/^\s*$/i.test(n)){for(var r,i,a,o,s=0;s<u.length;s++){var l=u[s];if(((e,t)=>{if("string"==typeof t)return t===e.nodeName.toLowerCase();if(Array.isArray(t))return-1!==t.indexOf(e.nodeName.toLowerCase());if("function"==typeof t)return t.call(h,e);throw new TypeError("`filter` needs to be a string, array, or function")})(e,l.filter)){if("function"!=typeof l.replacement)throw new TypeError("`replacement` needs to be a function that returns a string");i=n,o=a=c=void 0,o=a="",f(r=e)||(c=/^[ \r\n\t]/.test(i),i=/[ \r\n\t]$/.test(i),c&&!g("left",r)&&(a=" "),i&&!g("right",r)&&(o=" "));var c={leading:a,trailing:o};(c.leading||c.trailing)&&(n=n.trim()),t=c.leading+l.replacement.call(h,n,e)+c.trailing;break}}e._replacement=t}else e._replacement=""}(h=function(e,t){if(t=t||{},"string"!=typeof e)throw new TypeError(e+" is not a string");if(""===e)return"";e=e.replace(/(\d+)\. /g,"$1\\. ");e=e,e=(new o).parseFromString(e,"text/html"),s(e.documentElement,f);var e=e.body,n=(e=>{for(var t,n,r,i=[e],a=[];0<i.length;)for(t=i.shift(),a.push(t),n=t.childNodes,r=0;r<n.length;r++)1===n[r].nodeType&&i.push(n[r]);return a.shift(),a})(e);u=i.slice(0),t.gfm&&(u=a.concat(u)),t.converters&&(u=t.converters.concat(u));for(var r=n.length-1;0<=r;r--)c(n[r]);return p(e).replace(/^[\t\r\n]+|[\t\r\n\s]+$/g,"").replace(/\n\s+\n/g,"\n\n").replace(/\n{3,}/g,"\n\n")}).isBlock=f,h.isVoid=d,h.outer=function(e,t){return e.cloneNode(!1).outerHTML.replace("><",">"+t+"<")},t.exports=h},{"./lib/gfm-converters":2,"./lib/html-parser":3,"./lib/md-converters":4,"collapse-whitespace":7}],2:[function(e,t,n){function s(e,t){return(0===Array.prototype.indexOf.call(t.parentNode.childNodes,t)?"| ":" ")+e+" |"}var r=/highlight highlight-(\S+)/;t.exports=[{filter:"br",replacement:function(){return"\n"}},{filter:["del","s","strike"],replacement:function(e){return"~~"+e+"~~"}},{filter:function(e){return"checkbox"===e.type&&"LI"===e.parentNode.nodeName},replacement:function(e,t){return(t.checked?"[x]":"[ ]")+" "}},{filter:["th","td"],replacement:s},{filter:"tr",replacement:function(e,t){var n="",r={left:":--",right:"--:",center:":-:"};if("THEAD"===t.parentNode.nodeName)for(var i=0;i<t.childNodes.length;i++){var a=t.childNodes[i].attributes.align,o="---";n+=s(o=a?r[a.value]||o:o,t.childNodes[i])}return"\n"+e+(n?"\n"+n:"")}},{filter:"table",replacement:function(e){return"\n\n"+e+"\n\n"}},{filter:["thead","tbody","tfoot"],replacement:function(e){return e}},{filter:function(e){return"PRE"===e.nodeName&&e.firstChild&&"CODE"===e.firstChild.nodeName},replacement:function(e,t){return"\n\n```\n"+t.firstChild.textContent+"\n```\n\n"}},{filter:function(e){return"PRE"===e.nodeName&&"DIV"===e.parentNode.nodeName&&r.test(e.parentNode.className)},replacement:function(e,t){return"\n\n```"+t.parentNode.className.match(r)[1]+"\n"+t.textContent+"\n```\n\n"}},{filter:function(e){return"DIV"===e.nodeName&&r.test(e.className)},replacement:function(e){return"\n\n"+e+"\n\n"}}]},{}],3:[function(e,t,n){var r,i="undefined"!=typeof window?window:this;function a(){}t.exports=(()=>{var e=i.DOMParser,t=!1;try{(new e).parseFromString("","text/html")&&(t=!0)}catch(e){}return t})()?i.DOMParser:("undefined"==typeof document?(r=e("jsdom"),a.prototype.parseFromString=function(e){return r.jsdom(e,{features:{FetchExternalResources:[],ProcessExternalResources:!1}})}):(()=>{var t=!1;try{document.implementation.createHTMLDocument("").open()}catch(e){window.ActiveXObject&&(t=!0)}return t})()?a.prototype.parseFromString=function(e){var t=new window.ActiveXObject("htmlfile");return t.designMode="on",t.open(),t.write(e),t.close(),t}:a.prototype.parseFromString=function(e){var t=document.implementation.createHTMLDocument("");return t.open(),t.write(e),t.close(),t},a)},{jsdom:6}],4:[function(e,t,n){t.exports=[{filter:"p",replacement:function(e){return"\n\n"+e+"\n\n"}},{filter:"br",replacement:function(){return"  \n"}},{filter:["h1","h2","h3","h4","h5","h6"],replacement:function(e,t){for(var n=t.nodeName.charAt(1),r="",i=0;i<n;i++)r+="#";return"\n\n"+r+" "+e+"\n\n"}},{filter:"hr",replacement:function(){return"\n\n* * *\n\n"}},{filter:["em","i"],replacement:function(e){return"_"+e+"_"}},{filter:["strong","b"],replacement:function(e){return"**"+e+"**"}},{filter:function(e){var t=e.previousSibling||e.nextSibling,t="PRE"===e.parentNode.nodeName&&!t;return"CODE"===e.nodeName&&!t},replacement:function(e){return"`"+e+"`"}},{filter:function(e){return"A"===e.nodeName&&e.getAttribute("href")},replacement:function(e,t){var n=t.title?' "'+t.title+'"':"";return"["+e+"]("+t.getAttribute("href")+n+")"}},{filter:"img",replacement:function(e,t){var n=t.alt||"",r=t.getAttribute("src")||"",t=t.title||"";return r?"!["+n+"]("+r+(t?' "'+t+'"':"")+")":""}},{filter:function(e){return"PRE"===e.nodeName&&"CODE"===e.firstChild.nodeName},replacement:function(e,t){return"\n\n    "+t.firstChild.textContent.replace(/\n/g,"\n    ")+"\n\n"}},{filter:"blockquote",replacement:function(e){return"\n\n"+(e=(e=(e=e.trim()).replace(/\n{3,}/g,"\n\n")).replace(/^/gm,"> "))+"\n\n"}},{filter:"li",replacement:function(e,t){e=e.replace(/^\s+/,"").replace(/\n/gm,"\n    ");var n=t.parentNode,t=Array.prototype.indexOf.call(n.children,t)+1;return(/ol/i.test(n.nodeName)?t+".  ":"*   ")+e}},{filter:["ul","ol"],replacement:function(e,t){for(var n=[],r=0;r<t.childNodes.length;r++)n.push(t.childNodes[r]._replacement);return/li/i.test(t.parentNode.nodeName)?"\n"+n.join("\n"):"\n\n"+n.join("\n")+"\n\n"}},{filter:function(e){return this.isBlock(e)},replacement:function(e,t){return"\n\n"+this.outer(t,e)+"\n\n"}},{filter:function(){return!0},replacement:function(e,t){return this.outer(t,e)}}]},{}],5:[function(e,t,n){t.exports=["address","article","aside","audio","blockquote","canvas","dd","div","dl","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","main","nav","noscript","ol","output","p","pre","section","table","tfoot","ul","video"]},{}],6:[function(e,t,n){},{}],7:[function(e,t,n){var l=e("void-elements"),r=(Object.keys(l).forEach(function(e){l[e.toUpperCase()]=1}),{});function c(e){return!(!e||!r[e.nodeName])}function h(e){var t=e.nextSibling||e.parentNode;return e.parentNode.removeChild(e),t}function u(e,t){return e&&e.parentNode===t||"PRE"===t.nodeName?t.nextSibling||t.parentNode:t.firstChild||t.nextSibling||t.parentNode}e("block-elements").forEach(function(e){r[e.toUpperCase()]=1}),t.exports=function(e,t){if(e.firstChild&&"PRE"!==e.nodeName){"function"!=typeof t&&(t=c);for(var n=null,r=!1,i=u(s=null,e);i!==e;){if(3===i.nodeType){var a=i.data.replace(/[ \r\n\t]+/g," ");if(!(a=n&&!/ $/.test(n.data)||r||" "!==a[0]?a:a.substr(1))){i=h(i);continue}i.data=a,n=i}else{if(1!==i.nodeType){i=h(i);continue}t(i)||"BR"===i.nodeName?(n&&(n.data=n.data.replace(/ $/,"")),n=null,r=!1):(a=i)&&l[a.nodeName]&&(r=!(n=null))}var o=u(s,i),s=i,i=o}n&&(n.data=n.data.replace(/ $/,""),n.data||h(n))}}},{"block-elements":5,"void-elements":8}],8:[function(e,t,n){t.exports={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,menuitem:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0}},{}]},{},[1])(1)}),(e=>{"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?e(require("jquery")):e(jQuery)})(function(_){function n(n,r){_.each(["autofocus","savable","hideable","width","height","resize","iconlibrary","language","footer","fullscreen","hiddenButtons","disabledButtons"],function(e,t){void 0!==_(n).data(t)&&((r="object"==typeof r?r:{})[t]=_(n).data(t))}),this.$ns="bootstrap-markdown",this.$element=_(n),this.$editable={el:null,type:null,attrKeys:[],attrValues:[],content:null},this.$options=_.extend(!0,{},_.fn.markdown.defaults,r,this.$element.data("options")),this.$oldContent=null,this.$isPreview=!1,this.$isFullscreen=!1,this.$editor=null,this.$textarea=null,this.$handler=[],this.$callback=[],this.$nextTab=[],this.showEditor()}function t(e){e.data("markdown")?e.data("markdown").showEditor():e.markdown()}n.prototype={constructor:n,__alterButtons:function(n,r){var e=this.$handler,i="all"==n,a=this;_.each(e,function(e,t){!1===(!i&&t.indexOf(n)<0)&&r(a.$editor.find('button[data-handler="'+t+'"]'))})},__buildButtons:function(e,t){for(var n=this.$ns,r=this.$handler,i=this.$callback,a=0;a<e.length;a++)for(var o=e[a],s=0;s<o.length;s++){for(var l=o[s].data,c=_("<div/>",{class:"btn-group"}),h=0;h<l.length;h++){var u=l[h],f=n+"-"+u.name,d=this.__getIcon(u.icon),p=u.btnText||"",g=u.btnClass||"btn",m=u.tabIndex||"-1",v=void 0!==u.hotkey?u.hotkey:"",b=void 0!==jQuery.hotkeys&&""!==v?" ("+v+")":"",y=_("<button></button>");y.text(" "+this.__localize(p)).addClass("btn-default").addClass(g),g.match(/btn\-(primary|success|info|warning|danger|link)/)&&y.removeClass("btn-default"),y.attr({type:"button",title:this.__localize(u.title)+b,tabindex:m,"data-provider":n,"data-handler":f,"data-hotkey":v}),!0===u.toggle&&y.attr("data-toggle","button"),(p=_("<span/>")).addClass(d),p.prependTo(y),c.append(y),r.push(f),i.push(u.callback)}t.append(c)}return t},__setListener:function(){var e=void 0!==this.$textarea.attr("rows"),t=5<this.$textarea.val().split("\n").length?this.$textarea.val().split("\n").length:"5",e=e?this.$textarea.attr("rows"):t;this.$textarea.attr("rows",e),this.$options.resize&&this.$textarea.css("resize",this.$options.resize),this.$textarea.on({focus:_.proxy(this.focus,this),keyup:_.proxy(this.keyup,this),change:_.proxy(this.change,this),select:_.proxy(this.select,this)}),this.eventSupported("keydown")&&this.$textarea.on("keydown",_.proxy(this.keydown,this)),this.eventSupported("keypress")&&this.$textarea.on("keypress",_.proxy(this.keypress,this)),this.$textarea.data("markdown",this)},__handle:function(e){var t=_(e.currentTarget),n=this.$handler,r=this.$callback,t=t.attr("data-handler"),r=r[n.indexOf(t)];_(e.currentTarget).focus(),r(this),this.change(this),t.indexOf("cmdSave")<0&&this.$textarea.focus(),e.preventDefault()},__localize:function(e){var t=_.fn.markdown.messages,n=this.$options.language;return void 0!==t&&void 0!==t[n]&&void 0!==t[n][e]?t[n][e]:e},__getIcon:function(e){return"object"==typeof e?e[this.$options.iconlibrary]:e},setFullscreen:function(e){var t=this.$editor,n=this.$textarea;!0===e?(t.addClass("md-fullscreen-mode"),_("body").addClass("md-nooverflow"),this.$options.onFullscreen(this)):(t.removeClass("md-fullscreen-mode"),_("body").removeClass("md-nooverflow"),1==this.$isPreview&&this.hidePreview().showPreview()),this.$isFullscreen=e,n.focus()},showEditor:function(){var e,r,n,t,i,a=this,o=this.$ns,s=this.$element,l=(s.css("height"),s.css("width"),this.$editable),c=this.$handler,h=this.$callback,u=this.$options,f=_("<div/>",{class:"md-editor",click:function(){a.focus()}});return null===this.$editor?(e=_("<div/>",{class:"md-header btn-toolbar"}),r=[],0<u.buttons.length&&(r=r.concat(u.buttons[0])),0<u.additionalButtons.length&&_.each(u.additionalButtons[0],function(e,n){var t=_.grep(r,function(e,t){return e.name===n.name});0<t.length?t[0].data=t[0].data.concat(n.data):r.push(u.additionalButtons[0][e])}),0<(r=0<u.reorderButtonGroups.length?r.filter(function(e){return-1<u.reorderButtonGroups.indexOf(e.name)}).sort(function(e,t){return u.reorderButtonGroups.indexOf(e.name)<u.reorderButtonGroups.indexOf(t.name)?-1:u.reorderButtonGroups.indexOf(e.name)>u.reorderButtonGroups.indexOf(t.name)?1:0}):r).length&&(e=this.__buildButtons([r],e)),u.fullscreen.enable&&e.append('<div class="md-controls"><a class="md-control md-control-fullscreen" href="javascript:void(0);"><span class="'+this.__getIcon(u.fullscreen.icons.fullscreenOn)+'"></span></a></div>').on("click",".md-control-fullscreen",function(e){e.preventDefault(),a.setFullscreen(!0)}),f.append(e),s.is("textarea")?(s.before(f),(n=s).addClass("md-input"),f.append(n)):(t="function"==typeof toMarkdown?toMarkdown(s.html()):s.html(),t=_.trim(t),n=_("<textarea/>",{class:"md-input",val:t}),f.append(n),l.el=s,l.type=s.prop("tagName").toLowerCase(),l.content=s.html(),_(s[0].attributes).each(function(){l.attrKeys.push(this.nodeName),l.attrValues.push(this.nodeValue)}),s.replaceWith(f)),t=_("<div/>",{class:"md-footer"}),s=!1,i="",u.savable&&(s=!0,c.push(c="cmdSave"),h.push(u.onSave),t.append('<button class="btn btn-success" data-provider="'+o+'" data-handler="'+c+'"><i class="icon icon-white icon-ok"></i> '+this.__localize("Save")+"</button>")),i="function"==typeof u.footer?u.footer(this):u.footer,""!==_.trim(i)&&(s=!0,t.append(i)),s&&f.append(t),u.width&&"inherit"!==u.width&&(jQuery.isNumeric(u.width)?(f.css("display","table"),n.css("width",u.width+"px")):f.addClass(u.width)),u.height&&"inherit"!==u.height&&(jQuery.isNumeric(u.height)?(h=u.height,e&&(h=Math.max(0,h-e.outerHeight())),t&&(h=Math.max(0,h-t.outerHeight())),n.css("height",h+"px")):f.addClass(u.height)),this.$editor=f,this.$textarea=n,this.$editable=l,this.$oldContent=this.getContent(),this.__setListener(),this.$editor.attr("id",(new Date).getTime()),this.$editor.on("click",'[data-provider="bootstrap-markdown"]',_.proxy(this.__handle,this)),(this.$element.is(":disabled")||this.$element.is("[readonly]"))&&(this.$editor.addClass("md-editor-disabled"),this.disableButtons("all")),this.eventSupported("keydown")&&"object"==typeof jQuery.hotkeys&&e.find('[data-provider="bootstrap-markdown"]').each(function(){var e=_(this),t=e.attr("data-hotkey");""!==t.toLowerCase()&&n.bind("keydown",t,function(){return e.trigger("click"),!1})}),"preview"===u.initialstate?this.showPreview():"fullscreen"===u.initialstate&&u.fullscreen.enable&&this.setFullscreen(!0)):this.$editor.show(),u.autofocus&&(this.$textarea.focus(),this.$editor.addClass("active")),u.fullscreen.enable&&!1!==u.fullscreen&&(this.$editor.append('<div class="md-fullscreen-controls"><a href="javascript:void(0);" class="exit-fullscreen" title="Exit fullscreen"><span class="'+this.__getIcon(u.fullscreen.icons.fullscreenOff)+'"></span></a></div>'),this.$editor.on("click",".exit-fullscreen",function(e){e.preventDefault(),a.setFullscreen(!1)})),this.hideButtons(u.hiddenButtons),this.disableButtons(u.disabledButtons),u.onShow(this),this},parseContent:function(e){e=e||this.$textarea.val(),e=this.$options.parser?this.$options.parser(e):"object"==typeof markdown?markdown.toHTML(e):"function"==typeof marked?marked(e):e;return e},showPreview:function(){var e=this.$options,t=this.$textarea,n=t.next(),r=_("<div/>",{class:"md-preview","data-provider":"markdown-preview"});return 1!=this.$isPreview&&(this.$isPreview=!0,this.disableButtons("all").enableButtons("cmdPreview"),e="string"==typeof(e=e.onPreview(this))?e:this.parseContent(),r.html(e),n&&"md-footer"==n.attr("class")?r.insertBefore(n):t.parent().append(r),r.css({width:t.outerWidth()+"px",height:t.outerHeight()+"px"}),this.$options.resize&&r.css("resize",this.$options.resize),t.hide(),r.data("markdown",this),this.$element.is(":disabled")||this.$element.is("[readonly]"))&&(this.$editor.addClass("md-editor-disabled"),this.disableButtons("all")),this},hidePreview:function(){return this.$isPreview=!1,this.$editor.find('div[data-provider="markdown-preview"]').remove(),this.enableButtons("all"),this.disableButtons(this.$options.disabledButtons),this.$textarea.show(),this.__setListener(),this},isDirty:function(){return this.$oldContent!=this.getContent()},getContent:function(){return this.$textarea.val()},setContent:function(e){return this.$textarea.val(e),this},findSelection:function(e){var t,n;return 0<=(n=this.getContent().indexOf(e))&&0<e.length?(t=this.getSelection(),this.setSelection(n,n+e.length),n=this.getSelection(),this.setSelection(t.start,t.end),n):null},getSelection:function(){var t=this.$textarea[0];return("selectionStart"in t?function(){var e=t.selectionEnd-t.selectionStart;return{start:t.selectionStart,end:t.selectionEnd,length:e,text:t.value.substr(t.selectionStart,e)}}:function(){return null})()},setSelection:function(e,t){var n=this.$textarea[0];return("selectionStart"in n?function(){n.selectionStart=e,n.selectionEnd=t}:function(){return null})()},replaceSelection:function(e){var t=this.$textarea[0];return("selectionStart"in t?function(){return t.value=t.value.substr(0,t.selectionStart)+e+t.value.substr(t.selectionEnd,t.value.length),t.selectionStart=t.value.length,this}:function(){return t.value+=e,jQuery(t)})()},getNextTab:function(){var e,t;return 0===this.$nextTab.length?null:("function"==typeof(t=this.$nextTab.shift())?e=t():"object"==typeof t&&0<t.length&&(e=t),e)},setNextTab:function(e,t){var n,r;"string"==typeof e?(n=this).$nextTab.push(function(){return n.findSelection(e)}):"number"==typeof e&&"number"==typeof t&&(r=this.getSelection(),this.setSelection(e,t),this.$nextTab.push(this.getSelection()),this.setSelection(r.start,r.end))},__parseButtonNameParam:function(e){return"string"==typeof e?e.split(" "):e},enableButtons:function(e){var n=this.__parseButtonNameParam(e),r=this;return _.each(n,function(e,t){r.__alterButtons(n[e],function(e){e.removeAttr("disabled")})}),this},disableButtons:function(e){var n=this.__parseButtonNameParam(e),r=this;return _.each(n,function(e,t){r.__alterButtons(n[e],function(e){e.attr("disabled","disabled")})}),this},hideButtons:function(e){var n=this.__parseButtonNameParam(e),r=this;return _.each(n,function(e,t){r.__alterButtons(n[e],function(e){e.addClass("hidden")})}),this},showButtons:function(e){var n=this.__parseButtonNameParam(e),r=this;return _.each(n,function(e,t){r.__alterButtons(n[e],function(e){e.removeClass("hidden")})}),this},eventSupported:function(e){var t=e in this.$element;return t||(this.$element.setAttribute(e,"return;"),t="function"==typeof this.$element[e]),t},keyup:function(e){var t,n,r,i=!1;switch(e.keyCode){case 40:case 38:case 16:case 17:case 18:break;case 9:i=null!==(t=this.getNextTab())?(n=this,setTimeout(function(){n.setSelection(t.start,t.end)},500),!0):((r=this.getSelection()).start!=r.end||r.end!=this.getContent().length)&&(this.setSelection(this.getContent().length,this.getContent().length),!0);break;case 13:i=!1;break;case 27:this.$isFullscreen&&this.setFullscreen(!1),i=!1;break;default:i=!1}i&&(e.stopPropagation(),e.preventDefault()),this.$options.onChange(this)},change:function(e){return this.$options.onChange(this),this},select:function(e){return this.$options.onSelect(this),this},focus:function(e){var t=this.$options,n=(t.hideable,this.$editor);return n.addClass("active"),_(document).find(".md-editor").each(function(){var e;_(this).attr("id")!==n.attr("id")&&(e=null===(e=_(this).find("textarea").data("markdown"))?_(this).find('div[data-provider="markdown-preview"]').data("markdown"):e)&&e.blur()}),t.onFocus(this),this},blur:function(e){var n,t=this.$options,r=t.hideable,i=this.$editor,a=this.$editable;return!i.hasClass("active")&&0!==this.$element.parent().length||(i.removeClass("active"),r&&(null!==a.el?(n=_("<"+a.type+"/>"),r=this.getContent(),r=this.parseContent(r),_(a.attrKeys).each(function(e,t){n.attr(a.attrKeys[e],a.attrValues[e])}),n.html(r),i.replaceWith(n)):i.hide()),t.onBlur(this)),this}};var e=_.fn.markdown;_.fn.markdown=function(t){return this.each(function(){var e=_(this);e.data("markdown")||e.data("markdown",new n(this,"object"==typeof t&&t))})},_.fn.markdown.messages={},_.fn.markdown.defaults={autofocus:!1,hideable:!1,savable:!1,width:"inherit",height:"inherit",resize:"none",iconlibrary:"glyph",language:"en",initialstate:"editor",parser:null,buttons:[[{name:"groupFont",data:[{name:"cmdBold",hotkey:"Ctrl+B",title:"Bold",icon:{glyph:"glyphicon glyphicon-bold",fa:"fa fa-bold","fa-3":"icon-bold"},callback:function(e){var t=e.getSelection(),n=e.getContent(),r=0===t.length?e.__localize("strong text"):t.text,n="**"===n.substr(t.start-2,2)&&"**"===n.substr(t.end,2)?(e.setSelection(t.start-2,t.end+2),e.replaceSelection(r),t.start-2):(e.replaceSelection("**"+r+"**"),t.start+2);e.setSelection(n,n+r.length)}},{name:"cmdItalic",title:"Italic",hotkey:"Ctrl+I",icon:{glyph:"glyphicon glyphicon-italic",fa:"fa fa-italic","fa-3":"icon-italic"},callback:function(e){var t=e.getSelection(),n=e.getContent(),r=0===t.length?e.__localize("emphasized text"):t.text,n="_"===n.substr(t.start-1,1)&&"_"===n.substr(t.end,1)?(e.setSelection(t.start-1,t.end+1),e.replaceSelection(r),t.start-1):(e.replaceSelection("_"+r+"_"),t.start+1);e.setSelection(n,n+r.length)}},{name:"cmdHeading",title:"Heading",hotkey:"Ctrl+H",icon:{glyph:"glyphicon glyphicon-header",fa:"fa fa-header","fa-3":"icon-font"},callback:function(e){var t,n=e.getSelection(),r=e.getContent(),i=0===n.length?e.__localize("heading text"):n.text+"\n",r="### "===r.substr(n.start-(t=4),t)||"###"===r.substr(n.start-(t=3),t)?(e.setSelection(n.start-t,n.end),e.replaceSelection(i),n.start-t):0<n.start&&(t=r.substr(n.start-1,1))&&"\n"!=t?(e.replaceSelection("\n\n### "+i),n.start+6):(e.replaceSelection("### "+i),n.start+4);e.setSelection(r,r+i.length)}}]},{name:"groupLink",data:[{name:"cmdUrl",title:"URL/Link",hotkey:"Ctrl+L",icon:{glyph:"glyphicon glyphicon-link",fa:"fa fa-link","fa-3":"icon-link"},callback:function(e){var t=e.getSelection(),n=(e.getContent(),0===t.length?e.__localize("enter link description here"):t.text),r=prompt(e.__localize("Insert Hyperlink"),"http://"),i=new RegExp("^((http|https)://|(mailto:)|(//))[a-z0-9]","i");null!==r&&""!==r&&"http://"!==r&&i.test(r)&&(i=_("<div>"+r+"</div>").text(),e.replaceSelection("["+n+"]("+i+")"),r=t.start+1,e.setSelection(r,r+n.length))}},{name:"cmdImage",title:"Image",hotkey:"Ctrl+G",icon:{glyph:"glyphicon glyphicon-picture",fa:"fa fa-picture-o","fa-3":"icon-picture"},callback:function(e){var t=e.getSelection(),n=(e.getContent(),0===t.length?e.__localize("enter image description here"):t.text),r=prompt(e.__localize("Insert Image Hyperlink"),"http://"),i=new RegExp("^((http|https)://|(//))[a-z0-9]","i");null!==r&&""!==r&&"http://"!==r&&i.test(r)&&(i=_("<div>"+r+"</div>").text(),e.replaceSelection("!["+n+"]("+i+' "'+e.__localize("enter image title here")+'")'),r=t.start+2,e.setNextTab(e.__localize("enter image title here")),e.setSelection(r,r+n.length))}}]},{name:"groupMisc",data:[{name:"cmdList",hotkey:"Ctrl+U",title:"Unordered List",icon:{glyph:"glyphicon glyphicon-list",fa:"fa fa-list","fa-3":"icon-list-ul"},callback:function(e){var n,t,r=e.getSelection();e.getContent();r=0===r.length?(t=e.__localize("list text here"),e.replaceSelection("- "+t),r.start+2):r.text.indexOf("\n")<0?(t=r.text,e.replaceSelection("- "+t),r.start+2):(n=[],t=(n=r.text.split("\n"))[0],_.each(n,function(e,t){n[e]="- "+t}),e.replaceSelection("\n\n"+n.join("\n")),r.start+4),e.setSelection(r,r+t.length)}},{name:"cmdListO",hotkey:"Ctrl+O",title:"Ordered List",icon:{glyph:"glyphicon glyphicon-th-list",fa:"fa fa-list-ol","fa-3":"icon-list-ol"},callback:function(e){var n,t,r=e.getSelection();e.getContent();r=0===r.length?(t=e.__localize("list text here"),e.replaceSelection("1. "+t),r.start+3):r.text.indexOf("\n")<0?(t=r.text,e.replaceSelection("1. "+t),r.start+3):(n=[],t=(n=r.text.split("\n"))[0],_.each(n,function(e,t){n[e]="1. "+t}),e.replaceSelection("\n\n"+n.join("\n")),r.start+5),e.setSelection(r,r+t.length)}},{name:"cmdCode",hotkey:"Ctrl+K",title:"Code",icon:{glyph:"glyphicon glyphicon-asterisk",fa:"fa fa-code","fa-3":"icon-code"},callback:function(e){var t=e.getSelection(),n=e.getContent(),r=0===t.length?e.__localize("code text here"):t.text,n="```\n"===n.substr(t.start-4,4)&&"\n```"===n.substr(t.end,4)?(e.setSelection(t.start-4,t.end+4),e.replaceSelection(r),t.start-4):"`"===n.substr(t.start-1,1)&&"`"===n.substr(t.end,1)?(e.setSelection(t.start-1,t.end+1),e.replaceSelection(r),t.start-1):-1<n.indexOf("\n")?(e.replaceSelection("```\n"+r+"\n```"),t.start+4):(e.replaceSelection("`"+r+"`"),t.start+1);e.setSelection(n,n+r.length)}},{name:"cmdQuote",hotkey:"Ctrl+Q",title:"Quote",icon:{glyph:"glyphicon glyphicon-comment",fa:"fa fa-quote-left","fa-3":"icon-quote-left"},callback:function(e){var n,t,r=e.getSelection();e.getContent();r=0===r.length?(t=e.__localize("quote here"),e.replaceSelection("> "+t),r.start+2):r.text.indexOf("\n")<0?(t=r.text,e.replaceSelection("> "+t),r.start+2):(n=[],t=(n=r.text.split("\n"))[0],_.each(n,function(e,t){n[e]="> "+t}),e.replaceSelection("\n\n"+n.join("\n")),r.start+4),e.setSelection(r,r+t.length)}}]},{name:"groupUtil",data:[{name:"cmdPreview",toggle:!0,hotkey:"Ctrl+P",title:"Preview",btnText:"Preview",btnClass:"btn btn-primary btn-sm",icon:{glyph:"glyphicon glyphicon-search",fa:"fa fa-search","fa-3":"icon-search"},callback:function(e){!1===e.$isPreview?e.showPreview():e.hidePreview()}}]}]],additionalButtons:[],reorderButtonGroups:[],hiddenButtons:[],disabledButtons:[],footer:"",fullscreen:{enable:!0,icons:{fullscreenOn:{fa:"fa fa-expand",glyph:"glyphicon glyphicon-fullscreen","fa-3":"icon-resize-full"},fullscreenOff:{fa:"fa fa-compress",glyph:"glyphicon glyphicon-fullscreen","fa-3":"icon-resize-small"}}},onShow:function(e){},onPreview:function(e){},onSave:function(e){},onBlur:function(e){},onFocus:function(e){},onChange:function(e){},onFullscreen:function(e){},onSelect:function(e){}},_.fn.markdown.Constructor=n,_.fn.markdown.noConflict=function(){return _.fn.markdown=e,this};_(document).on("click.markdown.data-api",'[data-provide="markdown-editable"]',function(e){t(_(this)),e.preventDefault()}).on("click focusin",function(e){var n;n=_(document.activeElement),_(document).find(".md-editor").each(function(){var e=_(this),t=n.closest(".md-editor")[0]===this,e=e.find("textarea").data("markdown")||e.find('div[data-provider="markdown-preview"]').data("markdown");e&&!t&&e.blur()})}).ready(function(){_('textarea[data-provide="markdown"]').each(function(){t(_(this))})})});